import{b as e,c as l,o as a,e as t,f as o,F as s,y as r,m as u,D as n,s as c,r as d,aa as i,w as p,h as v,B as m,C as b,z as f,n as C,H as w,E as x,k as h,j as g,ab as y,ac as k,t as L}from"./chunk-CuXAu-_P.js";import{a as V,u as P,i as _,e as T}from"./chunk-CK6zyU60.js";const U={class:"w-full h-auto"},S=["onClick"],z=V(e({__name:"PatternSetting",props:{rowCount:{type:Number,default:17},cardColor:{type:String,default:"#fff"},patternColor:{type:String,default:"#000"},patternList:{type:Array,default:()=>[]}},setup(e){const c=e,d=l((()=>c));return(e,l)=>(a(),t("div",U,[o("ul",{class:"pattern-list",style:n({gridTemplateColumns:"repeat("+d.value.rowCount+",1fr)"})},[(a(!0),t(s,null,r(7*d.value.rowCount,(e=>(a(),t("li",{onClick:u((l=>((e,l)=>{if(d.value.patternList.includes(l)){const e=d.value.patternList.indexOf(l);d.value.patternList.splice(e,1)}else d.value.patternList.push(l)})(0,e)),["stop"]),class:"w-5 h-5",key:e,style:n({backgroundColor:d.value.patternList.includes(e)?d.value.patternColor:d.value.cardColor})},null,12,S)))),128))],4)]))}}),[["__scopeId","data-v-be6d21c1"]]),R={class:"modal-box"},j=o("h3",{class:"text-lg font-bold"},"提示!",-1),A=o("p",{class:"py-4"},"该操作会重置所有数据，是否继续？",-1),D={class:"modal-action"},I={method:"dialog",class:"flex gap-3"},N=o("h2",null,"全局配置",-1),F={class:"mb-8"},O={class:"flex flex-row items-center w-full gap-24 mb-10 form-control"},q={class:""},B=o("div",{class:"label"},[o("span",{class:"label-text"},"标题")],-1),E={class:"flex flex-row items-center w-full gap-24 mb-10 form-control"},H={class:""},M=o("div",{class:"label"},[o("span",{class:"label-text"},"列数")],-1),G={class:"help"},J={key:0,class:"text-sm text-red-400 help-text"},K={class:"tooltip","data-tip":"该项比较耗费时间和性能"},Q=["disabled"],W=o("span",null,"重设布局",-1),X={class:"loading loading-ring loading-md"},Y={class:"w-full max-w-xs form-control"},Z=o("div",{class:"label"},[o("span",{class:"label-text"},"选择主题")],-1),$=o("option",{disabled:"",selected:""},"选取主题",-1),ee=["value"],le={class:"w-full max-w-xs form-control"},ae=o("div",{class:"label"},[o("span",{class:"label-text"},"卡片颜色")],-1),te={class:"w-full max-w-xs form-control"},oe=o("div",{class:"label"},[o("span",{class:"label-text"},"中奖卡片颜色")],-1),se={class:"w-full max-w-xs form-control"},re=o("div",{class:"label"},[o("span",{class:"label-text"},"文字颜色")],-1),ue={class:"flex flex-row w-full max-w-xs gap-10 mb-10 form-control"},ne=o("div",{class:"label"},[o("span",{class:"label-text"},"卡片宽度")],-1),ce=o("div",{class:"label"},[o("span",{class:"label-text"},"卡片高度")],-1),de={class:"w-full max-w-xs mb-10 form-control"},ie=o("div",{class:"label"},[o("span",{class:"label-text"},"文字大小")],-1),pe={class:"w-full max-w-xs form-control"},ve=o("div",{class:"label"},[o("span",{class:"label-text"},"高亮颜色")],-1),me={class:"flex flex-row items-center w-full gap-24 mb-0 form-control"},be=o("div",{class:"label"},[o("span",{class:"label-text"},"图案设置")],-1),fe={class:"h-auto"},Ce={class:"flex w-full h-24 gap-3 m-0"},we=[o("span",null,"清空图案设置",-1)],xe=[o("span",null,"默认图案设置",-1)],he={class:"w-full max-w-xs mb-10 form-control"},ge=o("div",{class:"label"},[o("span",{class:"label-text"},"是否常显奖品列表")],-1),ye=["checked"],ke=e({__name:"FaceConfig",setup(e){const l=P().globalConfig,n=P().personConfig,V=P().prizeConfig,{getTopTitle:U,getTheme:S,getPatterColor:ke,getPatternList:Le,getCardColor:Ve,getLuckyColor:Pe,getTextColor:_e,getCardSize:Te,getTextSize:Ue,getRowCount:Se,getIsShowPrizeList:ze}=c(l),{getAlreadyPersonList:Re,getNotPersonList:je}=c(n),Ae=d(),De=d(),Ie=d(0),Ne=d(S.value.name),Fe=d(structuredClone(U.value)),Oe=d(structuredClone(Ve.value)),qe=d(structuredClone(Pe.value)),Be=d(structuredClone(_e.value)),Ee=d(structuredClone(Te.value)),He=d(structuredClone(Ue.value)),Me=d(structuredClone(Se.value)),Ge=d(structuredClone(ze.value)),Je=d(structuredClone(ke.value)),Ke=d(Object.keys(k)),Qe=d(k),We=d({rowCount:Me}),Xe=d({rowCount:""}),Ye=i.object({rowCount:i.number({required_error:"必填项",invalid_type_error:"必须填入数字"}).min(1,"最小为1").max(100,"最大为100")}),Ze={rowCount:We.value.rowCount},$e=()=>{Ie.value=2,setTimeout((()=>{const e=Re.value.length,l=je.value.length;if(e<=0&&l<=0)return;const a=Re.value.concat(je.value),t=a.slice(0,e),o=a.slice(e,l+e);n.deleteAllPerson(),n.addNotPersonList(o),n.addAlreadyPersonList(t,null),Ie.value=0}),1e3)},el=()=>{l.setPatternList([])},ll=()=>{l.resetPatternList()},al=()=>{l.reset(),n.reset(),V.resetDefault(),window.location.reload()};return p((()=>We.value.rowCount),(()=>{var e;Ze.rowCount=We.value.rowCount,(e=Ze,Ye.parseAsync(e)).then((e=>{e.rowCount&&(Ie.value=1,l.setRowCount(e.rowCount))})).catch((e=>{Xe.value.rowCount=e.issues[0].message}))})),p(Fe,(e=>{l.setTopTitle(e)})),p(Ne,(e=>{const a=Qe.value[e];l.setTheme({name:e,detail:a}),L.themeChange(e),a.primary&&(_(a.primary)||T(a.primary))&&l.setCardColor(a.primary)}),{deep:!0}),p(Oe,(e=>{l.setCardColor(e)}),{deep:!0}),p(qe,(e=>{l.setLuckyCardColor(e)}),{deep:!0}),p(Je,(e=>{l.setPatterColor(e)})),p(Be,(e=>{l.setTextColor(e)}),{deep:!0}),p(Ee,(e=>{l.setCardSize(e)}),{deep:!0}),p(Ge,(()=>{l.setIsShowPrizeList(Ge.value)})),v((()=>{})),(e,l)=>(a(),t(s,null,[o("dialog",{id:"my_modal_1",ref_key:"resetDataDialogRef",ref:De,class:"border-none modal"},[o("div",R,[j,A,o("div",D,[o("form",I,[o("button",{class:"btn",onClick:l[0]||(l[0]=e=>De.value.close())},"取消"),o("button",{class:"btn",onClick:al},"确定")])])])],512),o("div",null,[N,o("div",F,[o("button",{class:"btn btn-sm btn-primary",onClick:l[1]||(l[1]=e=>De.value.showModal())},"重置所有数据")]),o("label",O,[o("div",q,[B,m(o("input",{type:"text","onUpdate:modelValue":l[2]||(l[2]=e=>Fe.value=e),placeholder:"输入标题",class:"w-full max-w-xs input input-bordered"},null,512),[[b,Fe.value]])])]),o("label",E,[o("div",H,[M,m(o("input",{type:"number","onUpdate:modelValue":l[3]||(l[3]=e=>We.value.rowCount=e),placeholder:"Type here",class:"w-full max-w-xs input input-bordered"},null,512),[[b,We.value.rowCount]]),o("div",G,[Xe.value.rowCount?(a(),t("span",J,f(Xe.value.rowCount),1)):C("",!0)])]),o("div",null,[o("div",K,[o("button",{class:"mt-5 btn btn-info btn-sm",disabled:1!=Ie.value,onClick:$e},[W,m(o("span",X,null,512),[[w,2==Ie.value]])],8,Q)])])]),o("label",Y,[Z,m(o("select",{"data-choose-theme":"",class:"w-full max-w-xs border-solid select border-1","onUpdate:modelValue":l[4]||(l[4]=e=>Ne.value=e)},[$,(a(!0),t(s,null,r(Ke.value,((e,l)=>(a(),t("option",{key:l,value:e},f(e),9,ee)))),128))],512),[[x,Ne.value]])]),o("label",le,[ae,h(g(y),{ref_key:"colorPickerRef",ref:Ae,modelValue:Oe.value,"onUpdate:modelValue":l[5]||(l[5]=e=>Oe.value=e),"pure-color":Oe.value,"onUpdate:pureColor":l[6]||(l[6]=e=>Oe.value=e)},null,8,["modelValue","pure-color"])]),o("label",te,[oe,h(g(y),{ref_key:"colorPickerRef",ref:Ae,modelValue:qe.value,"onUpdate:modelValue":l[7]||(l[7]=e=>qe.value=e),"pure-color":qe.value,"onUpdate:pureColor":l[8]||(l[8]=e=>qe.value=e)},null,8,["modelValue","pure-color"])]),o("label",se,[re,h(g(y),{ref_key:"colorPickerRef",ref:Ae,modelValue:Be.value,"onUpdate:modelValue":l[9]||(l[9]=e=>Be.value=e),"pure-color":Be.value,"onUpdate:pureColor":l[10]||(l[10]=e=>Be.value=e)},null,8,["modelValue","pure-color"])]),o("label",ue,[o("div",null,[ne,m(o("input",{type:"number","onUpdate:modelValue":l[11]||(l[11]=e=>Ee.value.width=e),placeholder:"Type here",class:"w-full max-w-xs input input-bordered"},null,512),[[b,Ee.value.width]])]),o("div",null,[ce,m(o("input",{type:"number","onUpdate:modelValue":l[12]||(l[12]=e=>Ee.value.height=e),placeholder:"Type here",class:"w-full max-w-xs input input-bordered"},null,512),[[b,Ee.value.height]])])]),o("label",de,[ie,m(o("input",{type:"number","onUpdate:modelValue":l[13]||(l[13]=e=>He.value=e),placeholder:"Type here",class:"w-full max-w-xs input input-bordered"},null,512),[[b,He.value]])]),o("label",pe,[ve,h(g(y),{ref_key:"colorPickerRef",ref:Ae,modelValue:Je.value,"onUpdate:modelValue":l[14]||(l[14]=e=>Je.value=e),"pure-color":Je.value,"onUpdate:pureColor":l[15]||(l[15]=e=>Je.value=e)},null,8,["modelValue","pure-color"])]),o("label",me,[o("div",null,[be,o("div",fe,[h(z,{rowCount:g(Se),cardColor:g(Ve),patternColor:g(ke),patternList:g(Le)},null,8,["rowCount","cardColor","patternColor","patternList"])])])]),o("div",Ce,[o("button",{class:"mt-5 btn btn-info btn-sm",onClick:u(el,["stop"])},we),o("div",{class:"tooltip","data-tip":"默认图案设置针对17列时有效，其他列数请自行设置"},[o("button",{class:"mt-5 btn btn-info btn-sm",onClick:ll},xe)])]),o("label",he,[ge,o("input",{type:"checkbox",checked:Ge.value,onChange:l[16]||(l[16]=e=>Ge.value=!Ge.value),class:"mt-2 border-solid checkbox checkbox-secondary border-1"},null,40,ye)])])],64))}});export{ke as default};
